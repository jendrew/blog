<!DOCTYPE html>
<html lang="pl" layout:decorator="layout/base"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

<!--TODO: add 'edit post' button next to the title-->

<head>
    <!-- FACEBOOK OPEN GRAPH MARKERS -->
    <meta property="og:url"                th:content="@{${#httpServletRequest.requestURL}}"  />
    <meta property="og:type"               content="article" />
    <meta property="og:title"              th:content="${post.title}" />
    <meta property="og:description"        th:content="${description}" />
    <meta th:if="${post.imagePaths != null}"
          th:each="path : ${post.imagePaths}"
          property="og:image"
          th:content="@{|${#httpServletRequest.getScheme()}://${#httpServletRequest.getServerName()}:${#httpServletRequest.getServerPort()}${path}|}" />
    <!-- /FACEBOOK OPEN GRAPH MARKERS -->
</head>


<body>
<section layout:fragment="content">

    <div th:object="${post}">
        <h2 th:text="*{#strings.toUpperCase(title)}" class="mt-3">
        </h2>


        <p class="ob-post-header ob-color-darkgrey pb-3 ">

            <span class="fa fa-calendar-o" aria-hidden="true"></span>
            <span th:text="*{#dates.format(dateCreated, 'dd MMMM yyyy HH:mm')}" class="pr-4"></span>
            <span class="fa fa-user-o" aria-hidden="true"></span>
            <span th:text="*{author.username}" class="pr-4"></span>
            <span class="fa fa-folder-open-o" aria-hidden="true"></span>
            <a th:href="@{|/categories/*{category.name}|}" ><span th:text="*{category.name}"></span></a>
            <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{|/admin/posts/*{id}/edit|}" class="pl-4">
                <span  class="fa fa-pencil ob-color-darkgrey"></span>
            </a>
        </p>
        <p th:utext="*{body}"></p>




    </div>

</section>


</body>
</html>